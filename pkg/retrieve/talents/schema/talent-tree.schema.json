{
  "type": "object",
  "required": ["class_talent_nodes"],
  "properties": {
    "id": {"type": "integer"},
    "name": {"type": "string"},
    "playable_class": {
      "$ref": "#/$defs/playble"
    },
    "playable_specialization": {
      "$ref": "#/$defs/playble"
    },
    "class_talent_nodes": {
      "type": "array",
      "items": {
        "$ref": "#/$defs/class_talent_node"
      }
    },
    "spec_talent_nodes": {
      "type": "array",
      "items": {
        "$ref": "#/$defs/class_talent_node"
      }
    }
  },
  "$defs": {
    "key": {
      "type": "object",
      "required": ["href"],
      "properties": {
        "href": {"type": "string"}
      }
    },
    "playble": {
      "type": "object",
      "required": ["id", "name"],
      "properties": {
        "id": {"type": "integer"},
        "name": {"type": "string"},
        "key": {
          "$ref": "#/$defs/key"
        }
      }
    },
    "spell_tooltip": {
      "type": "object",
      "required": ["spell", "description"],
      "properties": {
        "spell": {
          "type": "object",
          "required": ["key", "name", "id"],
          "properties": {
            "key": {
              "$ref": "#/$defs/key"
            },
            "name": {"type": "string"},
            "id": {"type": "integer"}
          }
        },
        "description": {"type": "string"},
        "cast_time": {"type": "string"},
        "power_cost": {"type": "string"},
        "range": {"type": "string"},
        "cooldown": {"type": "string"}
      }
    },
    "tooltip": {
      "type": "object",
      "required": ["talent", "spell_tooltip"],
      "properties": {
        "talent": {
          "type": "object",
          "properties": {
            "key": {
              "$ref": "#/$defs/key"
            },
            "name": {"type": "string"},
            "id": {"type": "integer"}
          }
        },
        "spell_tooltip": {
          "$ref": "#/$defs/spell_tooltip"
        }
      }
    },
    "rank": {
      "type": "object",
      "properties": {
        "rank": {"type": "integer"},
        "tooltip": {
          "$ref": "#/$defs/tooltip"
        },
        "choice_of_tooltips": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/tooltip"
          }
        }
      },
      "oneOf": [
        {"required": ["rank", "tooltip"]},
        {"required": ["rank", "choice_of_tooltips"]}
      ]
    },
    "class_talent_node": {
      "type": "object",
      "required": [
        "id",
        "node_type",
        "display_row",
        "display_col",
        "raw_position_x",
        "raw_position_y"
      ],
      "ranks": {
        "type": "array",
        "items": {
          "$ref": "#/$defs/rank"
        }
      },
      "properties": {
        "id": {
          "type": "integer"
        },
        "unlocks": {
          "type": "array",
          "items": {
            "type": "integer"
          }
        },
        "locked_by": {
          "type": "array",
          "items": {
            "type": "integer"
          }
        },
        "node_type": {
          "type": "object",
          "required": ["id", "name"],
          "properties": {
            "id": {
              "type": "integer"
            },
            "name": {
              "type": "string"
            }
          }
        },
        "display_row": {"type": "integer"},
        "display_col": {"type": "integer"},
        "raw_position_x": {"type": "integer"},
        "raw_position_y": {"type": "integer"}
      }
    }
  }
}
